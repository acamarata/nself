# nself Project Configuration
# This is your MINIMAL configuration file
#
# IMPORTANT: You only need to set values you want to CHANGE
# Everything else uses smart defaults based on your ENV setting
#
# For all available options, see .env.example (900+ settings)
# For production, most users only need to set passwords

# ========================================================================
# BASIC SETTINGS (Usually all you need)
# ========================================================================

# Environment (dev/prod)
ENV=dev

# Your project name (used for containers and databases)
PROJECT_NAME=myproject

# Base domain for your application
BASE_DOMAIN=local.nself.org

# ========================================================================
# DATABASE CONFIGURATION
# ========================================================================

# PostgreSQL database settings
POSTGRES_DB=nhost
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres-dev-password

# Database extensions (comma-separated)
POSTGRES_EXTENSIONS=uuid-ossp

# ========================================================================
# HASURA CONFIGURATION
# ========================================================================

# Hasura GraphQL Engine
HASURA_GRAPHQL_ADMIN_SECRET=hasura-admin-secret-dev
HASURA_JWT_KEY=development-secret-key-minimum-32-characters-long
HASURA_ROUTE=api.${BASE_DOMAIN}

# ========================================================================
# AUTHENTICATION
# ========================================================================

# Hasura Auth service
AUTH_CLIENT_URL=http://localhost:3000
AUTH_ROUTE=auth.${BASE_DOMAIN}

# ========================================================================
# FILE STORAGE
# ========================================================================

# MinIO object storage
MINIO_ROOT_USER=minioadmin
MINIO_ROOT_PASSWORD=minioadmin
S3_ACCESS_KEY=storage-access-key-dev
S3_SECRET_KEY=storage-secret-key-dev
STORAGE_ROUTE=storage.${BASE_DOMAIN}

# ========================================================================
# OPTIONAL SERVICES (set to true to enable)
# ========================================================================

# Enable additional services
FUNCTIONS_ENABLED=false
DASHBOARD_ENABLED=false
REDIS_ENABLED=false
NSELF_ADMIN_ENABLED=false

# ========================================================================
# MICROSERVICES (set SERVICES_ENABLED=true to enable)
# ========================================================================

SERVICES_ENABLED=false

# NestJS services (comma-separated)
# NESTJS_SERVICES=auth,users,payments

# Go services (comma-separated)  
# GOLANG_SERVICES=analytics,notifications

# Python services (comma-separated)
# PYTHON_SERVICES=ml,data

# ========================================================================
# DATABASE PRODUCTION OPTIONS (uncomment as needed)
# ========================================================================
# All settings use smart defaults - only override if needed

# Performance Tuning (auto-configured based on available resources)
# DB_POOL_SIZE=auto               # Connection pool size (auto-scales)
# DB_SHARED_BUFFERS=auto          # Memory cache (auto: 25% RAM)
# DB_WORK_MEM=auto                # Per-query memory (auto-tunes)
# DB_LOG_MIN_DURATION=1000        # Log slow queries >1s (ms)
# DB_STATEMENT_TIMEOUT=30s        # Max query execution time

# Security (auto-enabled in production when ENV=prod)
# DB_SSL_MODE=auto                # SSL mode (auto: require in prod)
# DB_AUDIT_LOG=auto               # Audit logging (auto: on in prod)
# DB_ENCRYPT_AT_REST=auto         # Encryption (auto: true in prod)
# DB_FORCE_SSL=auto               # Force SSL connections

# Backup & Recovery (smart defaults based on ENV)
# DB_BACKUP_SCHEDULE=auto         # auto: daily in prod, weekly in dev
# DB_BACKUP_COMPRESSION=auto      # auto: best available (zstd>lz4>gzip)
# DB_BACKUP_ENCRYPTION=auto       # auto: true in prod
# DB_PITR_ENABLED=auto            # Point-in-time recovery (auto: prod)
# DB_PITR_RETENTION_DAYS=7        # WAL retention for recovery

# High Availability (optional - requires replica setup)
# DB_REPLICATION_MODE=none        # none, async, sync, logical
# DB_REPLICA_HOST=                # Replica server hostname/IP
# DB_FAILOVER_MODE=manual         # manual, automatic

# Monitoring (auto-enabled with nself monitor)
# DB_MONITORING_ENABLED=auto      # Database metrics collection
# DB_SLOW_QUERY_LOG=auto          # Log slow queries (auto: prod)
# DB_EXPORTER_ENABLED=auto        # Prometheus PostgreSQL exporter

# Connection Pooling (auto-enabled when connections > 10)
# DB_POOLER_ENABLED=auto          # PgBouncer pooling
# DB_POOL_MODE=transaction        # transaction, session, statement

# Maintenance (smart defaults)
# DB_AUTOVACUUM=on                # Automatic table maintenance
# DB_MAINTENANCE_WINDOW=02:00-06:00 # Preferred maintenance time

# ========================================================================
# NOTES
# ========================================================================

# - This file is for development only
# - For production, use 'nself prod' to generate secure passwords
# - Run 'nself build' after making changes
# - See .env.example for all available options