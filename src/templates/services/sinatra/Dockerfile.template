FROM ruby:3.2-slim

WORKDIR /app

# Copy Gemfile
COPY Gemfile .

# Install dependencies
RUN bundle install

# Copy application
COPY app.rb .

# Create non-root user
RUN useradd -m -u 1001 ruby && \
    chown -R ruby:ruby /app

USER ruby

EXPOSE 3000

CMD ["ruby", "app.rb"]