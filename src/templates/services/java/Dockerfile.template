FROM openjdk:17-alpine

WORKDIR /app

# Copy Java source
COPY Main.java .

# Compile
RUN javac Main.java

# Create non-root user
RUN addgroup -g 1001 -S java && \
    adduser -S java -u 1001 && \
    chown -R java:java /app

USER java

EXPOSE 3000

CMD ["java", "Main"]