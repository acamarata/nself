# ╔═══════════════════════════════════════════════════════╗
# ║            PRODUCTION ENVIRONMENT                      ║
# ╠═══════════════════════════════════════════════════════╣
# ║ Production configuration with clean URLs              ║
# ╚═══════════════════════════════════════════════════════╝

# Core Settings
ENV=prod
PROJECT_NAME=demo-app
BASE_DOMAIN=myapp.com

# SSL/Security
SSL_ENABLED=true
SSL_CERT_NAME=production

# Database Configuration
POSTGRES_DB=demo_prod
POSTGRES_USER=postgres
POSTGRES_PASSWORD=${PROD_DB_PASSWORD}
POSTGRES_MAX_CONNECTIONS=200
POSTGRES_SHARED_BUFFERS=256MB

# Hasura Configuration
HASURA_GRAPHQL_ADMIN_SECRET=${PROD_HASURA_SECRET}
HASURA_GRAPHQL_ENABLE_CONSOLE=false
HASURA_GRAPHQL_DEV_MODE=false
HASURA_GRAPHQL_ENABLE_TELEMETRY=false
HASURA_JWT_KEY=${PROD_JWT_KEY}
HASURA_ROUTE=api
HASURA_GRAPHQL_UNAUTHORIZED_ROLE=anonymous
HASURA_GRAPHQL_CORS_DOMAIN=https://*.myapp.com

# Auth Service
AUTH_JWT_SECRET=${PROD_JWT_KEY}
AUTH_ROUTE=auth
AUTH_CLIENT_URL=https://www.myapp.com
AUTH_EMAIL_VERIFICATION_REQUIRED=true
AUTH_MFA_ENABLED=true
AUTH_ALLOWED_REDIRECT_URLS=https://www.myapp.com,https://app.myapp.com

# Optional Services - Production Selection
# Note: nself-admin disabled in production for security
NSELF_ADMIN_ENABLED=false
MINIO_ENABLED=true
REDIS_ENABLED=true
FUNCTIONS_ENABLED=true
MLFLOW_ENABLED=true
# Note: Use real email service in production instead of MailPit
MAILPIT_ENABLED=false
MEILISEARCH_ENABLED=true

# MinIO Configuration
MINIO_ROOT_USER=${PROD_MINIO_USER}
MINIO_ROOT_PASSWORD=${PROD_MINIO_PASSWORD}
MINIO_DEFAULT_BUCKETS=uploads,public,private,temp,mlflow-artifacts
MINIO_ENDPOINT=https://storage.myapp.com

# Redis Configuration
REDIS_PASSWORD=${PROD_REDIS_PASSWORD}
REDIS_MAXCLIENTS=10000

# MeiliSearch Configuration
MEILISEARCH_MASTER_KEY=${PROD_MEILISEARCH_KEY}

# Monitoring - Full Stack for Production Observability
MONITORING_ENABLED=true
GRAFANA_ADMIN_PASSWORD=${PROD_GRAFANA_PASSWORD}

# Custom Backend Services
CS_1=express_api:express-js:8001
CS_2=bullmq_worker:bullmq-js:8002
CS_3=go_grpc:grpc:8003
CS_4=python_api:fastapi:8004

# Production Routes (Clean URLs)
# Note: api.v1.myapp.com
CS_1_ROUTE=api.v1
CS_1_PUBLIC=true
CS_1_REPLICAS=3

CS_2_PUBLIC=false
CS_2_REPLICAS=3

# Note: rpc.myapp.com
CS_3_ROUTE=rpc
CS_3_PUBLIC=true
CS_3_REPLICAS=2

# Note: ml.myapp.com
CS_4_ROUTE=ml
CS_4_PUBLIC=true
CS_4_REPLICAS=2

# Frontend Applications - Production Routes
FRONTEND_APP_1_NAME=app1
FRONTEND_APP_1_PORT=3000
# Note: www.myapp.com
FRONTEND_APP_1_ROUTE=www

FRONTEND_APP_2_NAME=app2
FRONTEND_APP_2_PORT=3001
# Note: app.myapp.com
FRONTEND_APP_2_ROUTE=app

# Production Features
DEBUG=false
LOG_LEVEL=warn
ENABLE_HOT_RELOAD=false
SEED_DATA=false
DEMO_USERS=false
DEMO_CONTENT=false

# Production Resource Limits
CS_1_MEMORY=1G
CS_1_CPU=1.0
CS_2_MEMORY=512M
CS_2_CPU=0.5
CS_3_MEMORY=512M
CS_3_CPU=1.0
CS_4_MEMORY=1G
CS_4_CPU=1.0
POSTGRES_MEMORY=4G
REDIS_MEMORY=1G

# Rate Limiting
NGINX_RATE_LIMIT=10r/s
NGINX_WORKER_PROCESSES=4
NGINX_WORKER_CONNECTIONS=2048

# Production Monitoring Routes
# Note: metrics.myapp.com
GRAFANA_ROUTE=metrics
# Note: prometheus.myapp.com
PROMETHEUS_ROUTE=prometheus
# Note: alerts.myapp.com
ALERTMANAGER_ROUTE=alerts