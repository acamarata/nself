# nself CLI Feedback & Bug Report

**Date:** January 23, 2026
**Version:** v0.4.7
**Reporter:** Automated Audit Tool

---

## Production VPS SSH Issue

### Description
Production VPS (5.75.235.42) is accessible on port 22 but SSH connection times out during banner exchange.

### Details
- **IP Address:** 5.75.235.42
- **Port 22 Status:** Open (verified via `nc -z`)
- **SSH Behavior:** Connection established but times out during banner exchange
- **Error Message:** `Connection timed out during banner exchange`

### Possible Causes
1. SSH service (sshd) may be unresponsive on the server
2. Firewall blocking after TCP handshake completes
3. SSH service overloaded or misconfigured
4. fail2ban or similar blocking connections

### Recommended Action
- Access server via Hetzner console to diagnose
- Check `systemctl status sshd`
- Review `/var/log/auth.log` for issues
- Verify firewall rules with `ufw status` or `iptables -L`

---

## Staging VPS - Unhealthy Services

### Description
Two services on staging VPS (167.235.233.65) are marked as unhealthy.

### Affected Services
1. **nself-web_hasura** - Status: unhealthy (Up 25 hours)
2. **nself-web_ping_api** - Status: unhealthy (Up 24 hours)

### Environment
- **OS:** Ubuntu 24.04.3 LTS
- **Docker:** v29.1.5
- **Total Containers:** 18

### Healthy Services
- postgres, auth, nginx, grafana, prometheus, loki, promtail, tempo
- alertmanager, cadvisor, node_exporter, postgres_exporter, redis_exporter
- minio, meilisearch, redis

### Recommended Action
1. Check hasura logs: `docker logs nself-web_hasura`
2. Check ping_api logs: `docker logs nself-web_ping_api`
3. Verify database connectivity for hasura
4. Restart unhealthy services if needed

---

## Staging VPS - nself CLI Not Installed

### Description
The nself CLI is not installed on the staging server. Services were started via docker-compose directly.

### Impact
- Cannot use `nself` commands on the server
- Manual docker-compose commands required
- No `nself doctor` diagnostics available

### Recommended Action
```bash
# SSH into staging
ssh root@167.235.233.65

# Install nself CLI
curl -fsSL https://raw.githubusercontent.com/acamarata/nself/main/install.sh | bash

# Verify installation
nself --version
```

---

## Documentation - Duplicate CLI Page

### Description
The `/docs` NextJS app has duplicate database command pages.

### Files
- `/docs/src/app/cli-db/page.tsx` - Current documentation
- `/docs/src/app/cli-database/page.tsx` - Legacy/duplicate

### Recommended Action
Remove `cli-database` folder to avoid confusion:
```bash
rm -rf /Users/admin/Sites/nself-web/docs/src/app/cli-database
```

---

## Documentation - Missing SCALE.md

### Description
COMMANDS.md references `SCALE.md` (lines 241, 375) but the file doesn't exist in `/Users/admin/Sites/nself/docs/commands/`.

### Impact
- Dead link in documentation
- `nself scale` command may not be fully documented

### Recommended Action
Either create SCALE.md or remove references from COMMANDS.md.

---

## Feature Requests

### 1. Auto Health Check Recovery
When `nself health watch` detects unhealthy services, automatically attempt recovery based on service type.

### 2. Production SSH Pre-check
Add `nself prod check-ssh` command to verify SSH connectivity before deployment attempts.

### 3. Service Dependency Visualization
Add `nself deps --graph` to generate visual dependency graph of services.

---

## Audit Summary

| Category | Status |
|----------|--------|
| CLI Documentation (~/Sites/nself/docs) | ✅ Complete - All 25 files verified |
| /docs NextJS App | ✅ Complete - All 20 CLI pages now exist |
| Staging VPS | ⚠️ 2 unhealthy services, CLI not installed |
| Production VPS | ❌ SSH inaccessible - requires console access |
| Database Schema | ✅ Complete - schema.dbml and types created |

---

*Report generated by automated audit*
