# nself v0.4.6 Release Notes

**Release Date**: January 22, 2026

## Overview

v0.4.6 is the **Scaling & Performance** release, adding comprehensive tools for performance profiling, benchmarking, operations management, and infrastructure control. This release focuses on giving teams visibility into their deployments and tools to optimize performance.

## New Commands

### Performance Commands

#### `nself perf` - Performance Profiling

Analyze container performance, identify slow queries, and get optimization recommendations.

```bash
# Full performance profile
nself perf

# Container resource usage
nself perf containers

# Slow query analysis
nself perf queries

# Database table statistics
nself perf tables

# Get optimization suggestions
nself perf recommendations

# Watch mode
nself perf watch
```

#### `nself bench` - Benchmarking & Load Testing

Run performance benchmarks, establish baselines, and stress test services.

```bash
# Run benchmark suite
nself bench run

# Run specific benchmark
nself bench run graphql
nself bench run auth
nself bench run database

# Create baseline
nself bench baseline

# Compare against baseline
nself bench compare

# Stress testing
nself bench stress
nself bench stress --duration 5m --concurrency 100

# Generate report
nself bench report
nself bench report --format html
```

#### `nself migrate` - Cross-Environment Migration

Migrate data, configuration, and schema between environments.

```bash
# Migrate from staging to local
nself migrate staging local

# Migrate with specific options
nself migrate prod staging --schema-only
nself migrate staging local --data-only
nself migrate prod local --anonymize

# Migrate configuration
nself migrate config staging local

# Preview changes
nself migrate staging local --dry-run

# Skip confirmation
nself migrate staging local --force
```

### Operations Commands

#### `nself health` - Health Check Management

Monitor service health with customizable checks and watch mode.

```bash
# Run all health checks
nself health check

# Check specific service
nself health service postgres
nself health service hasura

# Check custom endpoint
nself health endpoint https://api.example.com/health

# Watch mode with alerts
nself health watch
nself health watch --interval 30

# View health history
nself health history

# Configure health checks
nself health config
```

#### `nself history` - Operation Audit Trail

View and search the complete audit trail of operations.

```bash
# Show recent history
nself history show
nself history show --limit 50

# Filter by type
nself history deployments
nself history migrations
nself history rollbacks
nself history commands

# Search history
nself history search "deploy prod"
nself history search "migrate" --from "2026-01-01"

# Export history
nself history export history.json
nself history export --format csv

# Clear old entries
nself history clear --before "2025-12-01"
```

#### `nself config` - Configuration Management

View, edit, and validate configuration with secret protection.

```bash
# Show current configuration
nself config show
nself config show --reveal  # Show secrets

# Get specific value
nself config get POSTGRES_DB
nself config get HASURA_ADMIN_SECRET --reveal

# Set value
nself config set REDIS_ENABLED true
nself config set PROJECT_NAME myapp

# List all keys
nself config list
nself config list --category database

# Validate configuration
nself config validate

# Compare environments
nself config diff staging
nself config diff prod --reveal

# Export/Import
nself config export config.env
nself config import config.env

# Edit interactively
nself config edit

# Reset to defaults
nself config reset REDIS_PORT
```

### Infrastructure Commands

#### `nself servers` - Server Management

Manage deployment servers and infrastructure.

```bash
# List all servers
nself servers list
nself servers list --env prod

# Add a server
nself servers add web1 --ip 1.2.3.4 --provider hetzner
nself servers add staging-db --ip 5.6.7.8 --env staging

# Remove a server
nself servers remove web1
nself servers remove web1 --force

# Check status
nself servers status
nself servers status web1

# SSH into server
nself servers ssh web1
nself servers ssh web1 -- ls -la  # Run command

# View logs
nself servers logs web1
nself servers logs web1 --lines 200

# Update server config
nself servers update web1 --ip 1.2.3.5
nself servers update web1 --user deploy

# Reboot server
nself servers reboot web1
nself servers reboot web1 --force

# Detailed info
nself servers info web1
```

#### `nself frontend` - Frontend Application Management

Manage frontend applications for nginx routing.

```bash
# List frontend apps
nself frontend list

# Show status
nself frontend status

# Add frontend app
nself frontend add myapp --port 3000 --route app
nself frontend add admin --port 3001 --route admin

# Remove frontend app
nself frontend remove myapp

# Deploy frontend (Vercel/Netlify)
nself frontend deploy myapp
nself frontend deploy myapp --platform vercel

# View logs
nself frontend logs myapp

# Manage environment
nself frontend env myapp
nself frontend env myapp set API_URL https://api.example.com
```

## Enhanced Commands

### `nself status --json`

Machine-readable JSON output for tooling integration.

```bash
nself status --json
```

Output:
```json
{
  "project": "myapp",
  "environment": "local",
  "timestamp": "2026-01-23T10:30:00Z",
  "services": {
    "postgres": {"status": "healthy", "uptime": "2h15m"},
    "hasura": {"status": "healthy", "uptime": "2h14m"}
  }
}
```

### `nself status --all-envs`

Check status across all configured environments.

```bash
nself status --all-envs
```

### `nself deploy check`

Pre-deployment validation to catch issues before deploying.

```bash
nself deploy check
nself deploy check prod
```

Validates:
- Build has been run
- Environment configuration exists
- Required secrets are set
- SSH access to target server
- Docker resources available

### `nself urls --diff`

Compare URLs between environments.

```bash
nself urls --diff staging
nself urls --diff prod
```

## Command Count

| Category | v0.4.5 | v0.4.6 | New |
|----------|--------|--------|-----|
| Core | 14 | 14 | 0 |
| Database | 11 | 11 | 0 |
| Deployment | 5 | 6 | 1 |
| Performance | 0 | 15 | 15 |
| Operations | 0 | 20 | 20 |
| Infrastructure | 5 | 15 | 10 |
| **Total** | **35** | **55+** | **20+** |

## Files Changed

### New Files
- `src/cli/perf.sh` - Performance profiling (~500 lines)
- `src/cli/bench.sh` - Benchmarking and load testing (~600 lines)
- `src/cli/migrate.sh` - Cross-environment migration (~450 lines)
- `src/cli/health.sh` - Health check management (~400 lines)
- `src/cli/history.sh` - Operation audit trail (~500 lines)
- `src/cli/config.sh` - Configuration management (~500 lines)
- `src/cli/servers.sh` - Server infrastructure (~550 lines)
- `src/cli/frontend.sh` - Frontend management (~450 lines)
- `docs/commands/PERF.md` - Performance docs
- `docs/commands/BENCH.md` - Benchmarking docs
- `docs/commands/MIGRATE.md` - Migration docs
- `docs/commands/HEALTH.md` - Health check docs
- `docs/commands/HISTORY.md` - Audit trail docs
- `docs/commands/CONFIG.md` - Configuration docs
- `docs/commands/SERVERS.md` - Server management docs
- `docs/commands/FRONTEND.md` - Frontend docs
- `docs/commands/COMMANDS.md` - Complete command tree (reorganized)

### Modified Files
- `src/cli/status.sh` - Added --json and --all-envs flags
- `src/cli/urls.sh` - Added --env and --diff flags
- `src/cli/deploy.sh` - Added check subcommand
- `src/cli/help.sh` - Added all new commands
- `src/VERSION` - Updated to 0.4.6
- `docs/Home.md` - Updated for v0.4.6
- `docs/README.md` - Updated for v0.4.6
- `docs/_Sidebar.md` - Added new command categories
- `docs/releases/ROADMAP.md` - Updated roadmap

## Upgrade Instructions

```bash
# Update nself CLI
nself update

# Or manual installation
curl -fsSL https://raw.githubusercontent.com/acamarata/nself/main/install.sh | bash
```

## Breaking Changes

None. This release is fully backwards compatible.

## What's Next

**v0.4.7** will focus on:
- Kubernetes deployment support
- Helm chart generation
- Multi-cluster management
- GitOps workflows

---

Full documentation: https://github.com/acamarata/nself/wiki
